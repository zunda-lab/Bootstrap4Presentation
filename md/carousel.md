# カルーセル

---
このレクチャーでは、Bootstrap4のカルーセルについてお話しします。

---
カルーセルは画像を左右に次々とスライド表示できる機能です。
学習用アプリケーション PMMS の完成形でカルーセルのイメージを確認しましょう。

---
完成形のカルーセルは https://zunda-lab.github.io/Bootstrap4Sample/detail.html で確認できます。
ご覧の通り、周期的に画像が変化し、画像の左右に存在するコントローラで意図的に画面を遷移することができます。
見えにくいかもしれませんが、画像の下の方にある横棒のマークがインジケータです。
インジケータは、現在の画像の相対位置を把握できます。またクリックして他の画像を表示することも可能です。

---
初めに、Bootstrap4の公式ホームページを利用してカルーセルの基本について解説します。
Bootstrap4の公式ホームページで、Components の Carousel を開きます。
それから、右に表示された Carousel のサブメニューから With indicators（ウィズ・インジケーターズ） を選択します。

---
まずは、HTML の基本構成をお話します。
一番外側に carousel クラスと slide クラスを適用した div タグがあります。
div タグには carouselExampleIndicators という id が指定されています。 
そして、カルーセルの JavaScript を動作させるために data-ride="carousel" 属性を指定する必要があります。

---
一番外側の div タグの内側には、4つのタグが入れ込まれています。
１つは carousel-indicators クラスを適用した ol タグ、 2つ目は carousel-inner クラスを適用した div タグ、3つ目は carousel-control-prev クラスを適用した a タグ、4つ目は carousel-control-next クラスを適用した a タグです。

---
１つ目の carousel-indicators クラスを適用した ol タグは、インジケータを定義しています。
ol タグ内部には画像を掲載する枚数分の li タグがあります。

---
li タグには data-target 属性と data-slide-to 属性を指定します。
data-target 属性には一番外側の div タグで指定した id に先頭 # を付けて設定します。
data-slide-to 属性には数値を 0 から順に指定します。
最初のインジケータを選択状態とするために active クラスを適用しています。

---
2つ目の carousel-inner クラスを適用した div タグにはカルーセルに表示する画像を定義します。
内部に表示する画像の枚数分だけ div タグを用意し、carousel-item クラスを適用します。
その div タグの内部に img タグを入れ込み、画像を指定します。
最初に表示する画像の div タグには active クラスを適用します。

---
3つ目の carousel-control-prev クラスを適用した a タグは、画像の左に表示されるコントローラです。
href 属性には一番外側の div タグで指定した id に先頭 # を付けて設定します。

---
4つ目の carousel-control-next クラスを適用した a タグは、画像の右に表示されるコントローラです。
href 属性には一番外側の div タグで指定した id に先頭 # を付けて設定します。

---
ここまでの説明で、カルーセルの基本についてご理解いただけたと思います。
それでは学習用アプリケーション PMMS のカルーセルを作ってみましょう。
カルーセルのHTMLも型になっているので、公式ホームページからコピーをして PMMS 用にアレンジする方法を取ります。
まずは、ホームページの Copy ボタンをクリックして HTML をクリップボードに記憶させます。

---
次に VSCode で detail.html を開きます。
jumbotron クラスを適用したdiv タグの3階層下に、col−4 クラスを適用した div タグがありますで、その子要素にコピーした HTML を貼り付けましょう。
会員詳細画面の jumbotron はグリッドシステムを使用して12列を8列と4列に分割したデザインとなっています。
その4列の方にカルーセルを入れ込みます。
このレクチャー冒頭でお知らせした完成系のHTMLソースを参照するとご理解いただけると思います。

---
HTMLをコピーした段階では、ご覧の通り、画像は表示されません。
それは img タグの src 属性に設定した画像が存在しないからです。
まずは画像を準備し、img タグの src 属性を適切に設定して、画像を表示させましょう。

---
画像を保存する images フォルダを作成します。
VSCode のエクスプローラー Bootstrap4Sample フォルダで右クリックをして「新しいフォルダー」を選択します。
フォルダー名を要求されるので images と入力します。
これでフォルダが作成されました。

---
次に画像をダウンロードします。
ブラウザで完成形の GitHub リポジトリ https://github.com/zunda-lab/Bootstrap4Sample にアクセスします。
リポジトリが表示されたら、images フォルダをクリックします。
3つの jpg ファイルがあることがご覧いただけると思います。
まずは、Ryuya_OHKAWA_01.jpg をクリックします。
画像が表示されたら、Download ボタンをクリックします。
拡大画像が表示されますので、右クリックで画像を保存しましょう。
保存先のフォルダから前の手順で作成した images フォルダに画像をコピーまたは移動します。

---
次に、2 枚目の画像をダウンロードします。
ブラウザで 2 ページ戻り、Ryuya_OHKAWA_02.jpg をクリックします。
先ほどと同じ手順で画像を保存します。

---
次に、3 枚目の画像をダウンロードします。
ブラウザで 2 ページ戻り、Ryuya_OHKAWA_03.jpg をクリックします。
先ほどと同じ手順で画像を保存します。

---
3つの画像ファイルが images に保存できたら、img タグの src 属性を適切に修正します。
1つ目の src 属性を「images/Ryuya_OHKAWA_01.jpg」に修正します。
2つ目の src 属性は「images/Ryuya_OHKAWA_02.jpg」に修正します。
3つ目の src 属性は「images/Ryuya_OHKAWA_03.jpg」に修正します。

---
次は、画像にキャプションを表示するための設定です。
img タグの下に emmet 記法 .carousel-caption.d-none.d-md-block>p{さあいくぞ} を展開します。
d-none クラスと d-md-block クラスを併せて適用することで、ブラウザの幅が 768px 未満の場合は非表示となります。

---
それから、展開された div タグを、2つ目の img タグの下と、3つ目の img タグの下にコピーします。
コピーしたら p タグの中身を「くつろぐ大川」と「バグと戦う大川」に修正します。

---
以上で、detail.htmlの修正は終わりです。
ブラウザで動作テストをしてみましょう。
保存した detail.html を開いてみます。
ご覧の通り、ジャンボトロンの中にカルーセルが表示されました。
デフォルトでは 5秒毎に画像が切り替わります。
左右のコントローラや中央下のインジケータで強制的に画像が切り替わることを確認しましょう。

---

以上で、Bootstrap4のカルーセルについて解説を終わります。



